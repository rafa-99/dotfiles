#!/bin/sh

#FFMPEG Grabs X11 Screen Puts it into a file inside Videos Folder
INPUT=$(printf "Screen Record\nScreen Cast\nSound Record\nVoice Record" | dmenu -i -p "Record Type: ")
case "$INPUT" in
	"Screen Record")
		# Screen & audio only
		SOURCE=$(pamixer --list-sources | grep -vi "Sources:" | awk '{print $2}' | grep output | sed s:\"::g)
		ffmpeg -y -f x11grab -framerate 60 -s $(xdpyinfo | grep dimensions | awk '{print $2}') -i :0.0 -f pulse -i $SOURCE -c:v libx264rgb -preset superfast -c:a flac ~/Videos/Recordings/recording-"$(date '+%Y%m%d_%H%M%S')".mkv
		;;
	"Screen Cast")
		# Screen & voice only
		SOURCE=$(pamixer --list-sources | grep -vi "Sources:" | awk '{print $2}' | grep input | sed s:\"::g)
		ffmpeg -y -f x11grab -framerate 60 -s $(xdpyinfo | grep dimensions | awk '{print $2}') -i :0.0 -f pulse -i $SOURCE -c:v libx264rgb -preset superfast -r 30 -c:a flac ~/Videos/Recordings/recording-"$(date '+%Y%m%d_%H%M%S')".mkv
		;;
	"Sound Record")
		# Computer audio only
		SOURCE=$(pamixer --list-sources | grep -vi "Sources:" | awk '{print $2}' | grep output | sed s:\"::g)
		ffmpeg -y -f pulse -i $SOURCE -c:v libx264rgb -preset superfast -c:a flac ~/Music/Recordings/recording-"$(date '+%Y%m%d_%H%M%S')".flac
		;;
	"Voice Record")
		# Mic audio only
		SOURCE=$(pamixer --list-sources | grep -vi "Sources:" | awk '{print $2}' | grep input | sed s:\"::g)
		ffmpeg -y -f pulse -i $SOURCE -c:v libx264rgb -preset superfast -c:a flac ~/Music/Recordings/recording-"$(date '+%Y%m%d_%H%M%S')".flac
esac
