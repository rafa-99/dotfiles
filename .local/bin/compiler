#!/bin/sh

# Setting Vars
file=$(basename "$1")
extension=$(echo "$file" |awk -F . '{if (NF>1) {print $NF}}')
base=$(basename "$file" ."$extension")

# Suckless Compiler
if [ "$file" = "config.h" ]; then
			doas make clean install
elif [ "$file" = "config.def.h" ]; then
			doas make clean install
# Document Compiler
elif [ "$extension" = "rmd" ]; then
			document=$(printf "pdf_document\nhtml_document\nbeamer_presentation" | dmenu -i -p "Format:") && R -e "rmarkdown::render('$file', '"$document"')"
elif [ "$extension" = "md" ]; then
			document=$(printf "pdf_document\nhtml_document\nbeamer_presentation" | dmenu -i -p "Format:") && R -e "rmarkdown::render('$file', '"$document"')" 
elif [ "$extension" = "ms" ]; then
			groff -k -T pdf -m -ms "$file" > "$base.pdf"
# Program Compiler
elif [ "$extension" = "java" ]; then
			javac "$file"
# End of Compiler
else
			echo "Nothing to compile :^("
fi
