#!/bin/sh

Date(){
	Date=$(date +'%F %A')
	echo -e " $Date"
}

Disk(){
	Disk=$(df -h | grep ^/dev/sd | awk '{print " " $2 "/" $4}' | xargs)
	echo -e "$Disk"
}

Kernel(){
	Kernel=$(uname -nro)
	echo -e " $Kernel"
}

Memory(){
	Memory=$(free -h | awk '/^Mem:/ {print $3 "/" $2}')
	echo -e " $Memory"
}

Music(){
	if [ "$(pgrep -l mpd | awk '{print $2}')" = "mpd" ]; then 
		Playing=$(mpc status | grep - | awk -F"- "  '{print $NF}')
		echo -e "|  $Playing "
	fi
	}

Temp(){
	Temp=$(sensors | awk '/^temp1:/ {print $2}' | head -1 | cut -b 2,3,6,7,8)
	echo -e " $Temp"
}

Time(){
	Time=$(date +'%H:%M')
	echo -e " $Time"
}

Weather(){
	Weather=$(curl -Ss 'https://wttr.in?0&T&Q' | cut -c 16- | head -2 | xargs echo)
	echo -e "滛 $Weather"
}

Battery(){
	Battery=$(acpi -b | awk '{print $4}' | cut -d% -f1)
	if [ "$Battery" -ge 75 ]; then
		echo -e "  $Battery%"
		else
			if [ "$Battery" -ge 50 ]; then
				echo -e "  $Battery%"
			else
				if [ "$Battery" -ge 25 ]; then
					echo -e "  $Battery%"
				else
					if [ "$Battery" -ge 0 ]; then
						echo -e "  $Battery%"
					else
						echo -e "  No Info Found"
					fi
				fi
			fi
	fi
}
while true; do
	xsetroot -name "$(Music)| $(Battery) | $(Temp) | $(Memory) | $(Disk) | $(Date) | $(Time)"
	sleep 10s
done &
