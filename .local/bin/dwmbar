#!/bin/sh

Date(){
	Date=$(date +'%F %A')
	echo " $Date"
}

Disk(){
	Disk=$(df -h | grep ^/dev/sd | awk '{print " " $2 "/" $4}' | xargs)
	echo "$Disk"
}

Kernel(){
	Kernel=$(uname -nro)
	echo " $Kernel"
}

Memory(){
	Memory=$(free -h | awk '/^Mem:/ {print $3 "/" $2}')
	echo " $Memory"
}

Music(){
	if [ "$(pgrep -l mpd | awk '{print $2}')" = "mpd" ]; then 
		Playing=$(mpc status | grep - | awk -F"- "  '{print $NF}')
		echo "|  $Playing "
	fi
	}

Temperature(){
	Temp=$(sensors | grep ^temp1 | cut -d+ -f2 | sed "s:\s*::g")
	echo " $Temp"
}

Time(){
	Time=$(date +'%H:%M')
	echo " $Time"
}

Weather(){
	Weather=$(curl -Ss 'https://wttr.in?0&T&Q' | cut -c 16- | head -2 | xargs echo)
	echo "滛 $Weather"
}

Battery(){
	Battery=$(acpi -b | awk '{print $4}' | cut -d% -f1)
	if [ "$Battery" -ge 75 ]; then
		echo "  $Battery%"
		else
			if [ "$Battery" -ge 50 ]; then
				echo "  $Battery%"
			else
				if [ "$Battery" -ge 25 ]; then
					echo "  $Battery%"
				else
					if [ "$Battery" -ge 0 ]; then
						echo "  $Battery%"
					else
						echo "  No Info Found"
					fi
				fi
			fi
	fi
}
while true; do
	xsetroot -name "$(Music)| $(Battery) | $(Temp) | $(Memory) | $(Disk) | $(Date) | $(Time)"
	sleep 10s
done &
